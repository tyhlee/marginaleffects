<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adjusted Predictions • marginaleffects</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Adjusted Predictions">
<meta property="og:description" content="marginaleffects">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">marginaleffects</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="https://vincentarelbundock.github.io/marginaleffects/articles/mfx01_predictions.html" class="external-link">Adjusted predictions</a>
</li>
<li>
  <a href="https://vincentarelbundock.github.io/marginaleffects/articles/mfx03_mfx.html" class="external-link">Marginal effects</a>
</li>
<li>
  <a href="https://vincentarelbundock.github.io/marginaleffects/articles/mfx02_contrasts.html" class="external-link">Contrasts</a>
</li>
<li>
  <a href="https://vincentarelbundock.github.io/marginaleffects/articles/mfx04_marginalmeans.html" class="external-link">Marginal means</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="mfx01_predictions_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="mfx01_predictions_files/kePrint-0.0.1/kePrint.js"></script><link href="mfx01_predictions_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Adjusted Predictions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/vincentarelbundock/marginaleffects/blob/HEAD/vignettes/mfx01_predictions.Rmd" class="external-link"><code>vignettes/mfx01_predictions.Rmd</code></a></small>
      <div class="hidden name"><code>mfx01_predictions.Rmd</code></div>

    </div>

    
    
<p>In the context of this package, an “Adjusted Prediction” is defined as:</p>
<blockquote>
<p>The outcome predicted by a fitted model on a specified scale for a given combination of values of the predictor variables, such as their observed values, their means, or factor levels (a.k.a. “reference grid”).</p>
</blockquote>
<p>Here, the word “Adjusted” simply means “model-derived” or “model-based.”</p>
<div class="section level2">
<h2 id="prediction-type-or-scale">Prediction type (or scale)<a class="anchor" aria-label="anchor" href="#prediction-type-or-scale"></a>
</h2>
<p>Using the <code>type</code> argument of the <code><a href="../reference/predictions.html">predictions()</a></code> function we can specify the “scale” on which to make predictions. This refers to either the scale used to estimate the model (i.e., link scale) or to a more interpretable scale (e.g., response scale). For example, when fitting a linear regression model using the <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> function, the link scale and the response scale are identical. An “Adjusted Prediction” computed on either scale will be expressed as the mean value of the response variable at the given values of the predictor variables.</p>
<p>On the other hand, when fitting a binary logistic regression model using the <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm()</a></code> function (which uses a binomial family and a logit link ), the link scale and the response scale will be different: an “Adjusted Prediction” computed on the link scale will be expressed as a log odds of a “successful” response at the given values of the predictor variables, whereas an “Adjusted Prediction” computed on the response scale will be expressed as a probability that the response variable equals 1.</p>
<p>The default value of the <code>type</code> argument for most models is “response”, which means that the <code><a href="../reference/predictions.html">predictions()</a></code> function will compute predicted probabilities (binomial family), Poisson means (poisson family), etc.</p>
</div>
<div class="section level2">
<h2 id="prediction-grid">Prediction grid<a class="anchor" aria-label="anchor" href="#prediction-grid"></a>
</h2>
<p>To compute adjusted predictions we must first specify the values of the predictors to consider: a “reference grid.” For example, if our model is a linear model fitted with the lm() function which relates the response variable Happiness with the predictor variables Age, Gender and Income, the reference grid could be a <code>data.frame</code> with values for Age, Gender and Income: Age = 40, Gender = Male, Income = 60000.</p>
<p>The “reference grid” may or may not correspond to actual observations in the dataset used to fit the model; the example values given above could match the mean values of each variable, or they could represent a specific observed (or hypothetical) individual. The reference grid can include many different rows if we want to make predictions for different combinations of predictors. By default, the <code><a href="../reference/predictions.html">predictions()</a></code> function uses the full original dataset as a reference grid, which means it will compute adjusted predictions for each of the individuals observed in the dataset that was used to fit the model.</p>
</div>
<div class="section level2">
<h2 id="the-predictions-function">The <code>predictions()</code> function<a class="anchor" aria-label="anchor" href="#the-predictions-function"></a>
</h2>
<p>By default, <code>predictions</code> calculates the regression-adjusted predicted values for every observation in the original dataset:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://vincentarelbundock.github.io/marginaleffects/" class="external-link">marginaleffects</a></span><span class="op">)</span>

<span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">hp</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>

<span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pred</span><span class="op">)</span>
<span class="co">#&gt;   rowid     type predicted std.error statistic       p.value conf.low conf.high</span>
<span class="co">#&gt; 1     1 response  20.03819 1.2041405  16.64107  3.512623e-62 17.67812  22.39826</span>
<span class="co">#&gt; 2     2 response  20.03819 1.2041405  16.64107  3.512623e-62 17.67812  22.39826</span>
<span class="co">#&gt; 3     3 response  26.41451 0.9619738  27.45866 5.476301e-166 24.52907  28.29994</span>
<span class="co">#&gt; 4     4 response  20.03819 1.2041405  16.64107  3.512623e-62 17.67812  22.39826</span>
<span class="co">#&gt; 5     5 response  15.92247 0.9924560  16.04350  6.347069e-58 13.97729  17.86765</span>
<span class="co">#&gt; 6     6 response  20.15839 1.2186288  16.54186  1.832792e-61 17.76992  22.54685</span>
<span class="co">#&gt;    mpg  hp cyl</span>
<span class="co">#&gt; 1 21.0 110   6</span>
<span class="co">#&gt; 2 21.0 110   6</span>
<span class="co">#&gt; 3 22.8  93   4</span>
<span class="co">#&gt; 4 21.4 110   6</span>
<span class="co">#&gt; 5 18.7 175   8</span>
<span class="co">#&gt; 6 18.1 105   6</span></code></pre></div>
<p>In many cases, this is too limiting, and researchers will want to specify a grid of “typical” values over which to compute adjusted predictions.</p>
</div>
<div class="section level2">
<h2 id="adjusted-predictions-at-user-specified-values-aka-adjusted-predictions-at-representative-values-apr">Adjusted Predictions at User-Specified values (aka Adjusted Predictions at Representative values, APR)<a class="anchor" aria-label="anchor" href="#adjusted-predictions-at-user-specified-values-aka-adjusted-predictions-at-representative-values-apr"></a>
</h2>
<p>There are two main ways to select the reference grid over which we want to compute adjusted predictions. The first is using the <code>variables</code> argument. The second is with the <code>newdata</code> argument and the <a href="https://vincentarelbundock.github.io/marginaleffects/reference/datagrid.html" class="external-link"><code>datagrid()</code> function</a> that we already introduced in the <a href="https://vincentarelbundock.github.io/marginaleffects/articles/mfx03_mfx.html" class="external-link">marginal effects vignette.</a></p>
<div class="section level3">
<h3 id="variables-levels-and-tukeys-5-numbers">
<code>variables</code>: Levels and Tukey’s 5 numbers<a class="anchor" aria-label="anchor" href="#variables-levels-and-tukeys-5-numbers"></a>
</h3>
<p>The <code>variables</code> argument is a handy shortcut to create grids of predictors. Each of the levels of factor/logical/character variables listed in the <code>variables</code> argument will be displayed. For numeric variables, <code>predictions</code> will compute adjusted predictions at Tukey’s 5 summary numbers. All other variables will be set at their means or modes.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cyl"</span>, <span class="st">"hp"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;    rowid     type predicted std.error statistic       p.value  conf.low</span>
<span class="co">#&gt; 1      1 response  21.43244 1.6083883 13.325417  1.647107e-40 18.280061</span>
<span class="co">#&gt; 2      2 response  20.37474 1.2562453 16.218756  3.716490e-59 17.912540</span>
<span class="co">#&gt; 3      3 response  19.72569 1.1892191 16.587091  8.640479e-62 17.394860</span>
<span class="co">#&gt; 4      4 response  18.35547 1.4848895 12.361507  4.221654e-35 15.445143</span>
<span class="co">#&gt; 5      5 response  14.62945 3.4865450  4.195974  2.717009e-05  7.795951</span>
<span class="co">#&gt; 6      6 response  27.40010 1.0595843 25.859292 1.912807e-147 25.323352</span>
<span class="co">#&gt; 7      7 response  26.34239 0.9707174 27.137033 3.601945e-162 24.439819</span>
<span class="co">#&gt; 8      8 response  25.69334 1.1343184 22.650908 1.366648e-113 23.470118</span>
<span class="co">#&gt; 9      9 response  24.32313 1.7749372 13.703655  9.653908e-43 20.844315</span>
<span class="co">#&gt; 10    10 response  20.59711 4.0024363  5.146143  2.658970e-07 12.752478</span>
<span class="co">#&gt; 11    11 response  18.87925 2.5641372  7.362807  1.800823e-13 13.853631</span>
<span class="co">#&gt; 12    12 response  17.82154 1.9364843  9.203038  3.479686e-20 14.026100</span>
<span class="co">#&gt; 13    13 response  17.17249 1.5721502 10.922932  8.955672e-28 14.091133</span>
<span class="co">#&gt; 14    14 response  15.80228 0.9537705 16.568217  1.182803e-61 13.932921</span>
<span class="co">#&gt; 15    15 response  12.07626 2.1126445  5.716181  1.089447e-08  7.935551</span>
<span class="co">#&gt;    conf.high      mpg cyl  hp</span>
<span class="co">#&gt; 1   24.58483 20.09062   6  52</span>
<span class="co">#&gt; 2   22.83693 20.09062   6  96</span>
<span class="co">#&gt; 3   22.05651 20.09062   6 123</span>
<span class="co">#&gt; 4   21.26580 20.09062   6 180</span>
<span class="co">#&gt; 5   21.46296 20.09062   6 335</span>
<span class="co">#&gt; 6   29.47685 20.09062   4  52</span>
<span class="co">#&gt; 7   28.24496 20.09062   4  96</span>
<span class="co">#&gt; 8   27.91656 20.09062   4 123</span>
<span class="co">#&gt; 9   27.80194 20.09062   4 180</span>
<span class="co">#&gt; 10  28.44174 20.09062   4 335</span>
<span class="co">#&gt; 11  23.90486 20.09062   8  52</span>
<span class="co">#&gt; 12  21.61698 20.09062   8  96</span>
<span class="co">#&gt; 13  20.25385 20.09062   8 123</span>
<span class="co">#&gt; 14  17.67163 20.09062   8 180</span>
<span class="co">#&gt; 15  16.21697 20.09062   8 335</span></code></pre></div>
<p>The <code>data.frame</code> produced by <code>predictions</code> is “tidy”, which makes it easy to manipulate with other <code>R</code> packages and functions:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>

<span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cyl"</span>, <span class="st">"hp"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">hp</span>, <span class="va">cyl</span>, <span class="va">predicted</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>values_from <span class="op">=</span> <span class="va">predicted</span>, names_from <span class="op">=</span> <span class="va">cyl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"A table of Adjusted Predictions"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/add_header_above.html" class="external-link">add_header_above</a></span><span class="op">(</span>header <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" "</span> <span class="op">=</span> <span class="fl">1</span>, <span class="st">"cyl"</span> <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<caption>
A table of Adjusted Predictions
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
cyl
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
hp
</th>
<th style="text-align:right;">
6
</th>
<th style="text-align:right;">
4
</th>
<th style="text-align:right;">
8
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
21.43244
</td>
<td style="text-align:right;">
27.40010
</td>
<td style="text-align:right;">
18.87925
</td>
</tr>
<tr>
<td style="text-align:right;">
96
</td>
<td style="text-align:right;">
20.37474
</td>
<td style="text-align:right;">
26.34239
</td>
<td style="text-align:right;">
17.82154
</td>
</tr>
<tr>
<td style="text-align:right;">
123
</td>
<td style="text-align:right;">
19.72569
</td>
<td style="text-align:right;">
25.69334
</td>
<td style="text-align:right;">
17.17249
</td>
</tr>
<tr>
<td style="text-align:right;">
180
</td>
<td style="text-align:right;">
18.35547
</td>
<td style="text-align:right;">
24.32313
</td>
<td style="text-align:right;">
15.80228
</td>
</tr>
<tr>
<td style="text-align:right;">
335
</td>
<td style="text-align:right;">
14.62945
</td>
<td style="text-align:right;">
20.59711
</td>
<td style="text-align:right;">
12.07626
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="newdata-and-datagrid">
<code>newdata</code> and <code>datagrid</code><a class="anchor" aria-label="anchor" href="#newdata-and-datagrid"></a>
</h3>
<p>A second strategy to construct grids of predictors for adjusted predictions is to combine the <code>newdata</code> argument and the <code>datagrid</code> function. Recall that this function creates a “typical” dataset with all variables at their means or modes, except those we explicitly define:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span>cyl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span><span class="op">)</span>, model <span class="op">=</span> <span class="va">mod</span><span class="op">)</span>
<span class="co">#&gt;          hp cyl</span>
<span class="co">#&gt; 1: 146.6875   4</span>
<span class="co">#&gt; 2: 146.6875   6</span>
<span class="co">#&gt; 3: 146.6875   8</span></code></pre></div>
<p>We can also use this <code>datagrid</code> function in a <code>predictions</code> call (omitting the <code>model</code> argument):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span>, newdata <span class="op">=</span> <span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   rowid     type predicted std.error statistic      p.value conf.low conf.high</span>
<span class="co">#&gt; 1     1 response  16.60307  1.278754  12.98379 1.512165e-38 14.09676  19.10938</span>
<span class="co">#&gt;         hp cyl mpg</span>
<span class="co">#&gt; 1 146.6875   8   0</span>

<span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span>, newdata <span class="op">=</span> <span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span>cyl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   rowid     type predicted std.error statistic      p.value conf.low conf.high</span>
<span class="co">#&gt; 1     1 response  25.12392  1.368888  18.35353 3.093502e-75 22.44095  27.80689</span>
<span class="co">#&gt; 2     2 response  19.15627  1.247190  15.35955 3.057119e-53 16.71182  21.60071</span>
<span class="co">#&gt; 3     3 response  16.60307  1.278754  12.98379 1.512165e-38 14.09676  19.10938</span>
<span class="co">#&gt;         hp cyl mpg</span>
<span class="co">#&gt; 1 146.6875   4   0</span>
<span class="co">#&gt; 2 146.6875   6   0</span>
<span class="co">#&gt; 3 146.6875   8   0</span></code></pre></div>
<p>Users can change the summary function used to summarize each type of variables using the <code>FUN.numeric</code>, <code>FUN.factor</code>, and related arguments, for example substituting the mean for the median.</p>
</div>
<div class="section level3">
<h3 id="counterfactual-data-grid">
<code>counterfactual</code> data grid<a class="anchor" aria-label="anchor" href="#counterfactual-data-grid"></a>
</h3>
<p>An alternative approach to construct grids of predictors is to use <code>grid_type = "counterfactual"</code> argument value. This will duplicate the <em>whole</em> dataset, with the different values specified by the user.</p>
<p>For example, the <code>mtcars</code> dataset has 32 rows. This command produces a new dataset with 64 rows, with each row of the original dataset duplicated with the two values of the <code>am</code> variable supplied (0 and 1):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">vs</span> <span class="op">~</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">am</span>, data <span class="op">=</span> <span class="va">mtcars</span>, family <span class="op">=</span> <span class="va">binomial</span><span class="op">)</span>

<span class="va">nd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">mod</span>, am <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1</span>, grid_type <span class="op">=</span> <span class="st">"counterfactual"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">nd</span><span class="op">)</span>
<span class="co">#&gt; [1] 64  3</span></code></pre></div>
<p>Then, we can use this dataset and the <code>predictions</code> function to create interesting visualizations:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span>, newdata <span class="op">=</span> <span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span>am <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1</span>, grid_type <span class="op">=</span> <span class="st">"counterfactual"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">am</span>, <span class="va">predicted</span>, <span class="va">rowid_counterfactual</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>id_cols <span class="op">=</span> <span class="va">rowid_counterfactual</span>, 
                names_from <span class="op">=</span> <span class="va">am</span>,
                values_from <span class="op">=</span> <span class="va">predicted</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">pred</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">`0`</span>, y <span class="op">=</span> <span class="va">`1`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_abline</a></span><span class="op">(</span>intercept <span class="op">=</span> <span class="fl">0</span>, slope <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Predicted Pr(vs=1), when am = 0"</span>,
         y <span class="op">=</span> <span class="st">"Predicted Pr(vs=1), when am = 1"</span><span class="op">)</span></code></pre></div>
<p><img src="mfx01_predictions_files/figure-html/unnamed-chunk-8-1.png" width="576"></p>
<p>In this graph, each dot represents the predicted probability that <code>vs=1</code> for one observation of the dataset, in the counterfactual worlds where <code>am</code> is either 0 or 1.</p>
</div>
</div>
<div class="section level2">
<h2 id="adjusted-prediction-at-the-mean-apm">Adjusted Prediction at the Mean (APM)<a class="anchor" aria-label="anchor" href="#adjusted-prediction-at-the-mean-apm"></a>
</h2>
<p>Some analysts may want to calculate an “Adjusted Prediction at the Mean,” that is, the predicted outcome when all the regressors are held at their mean (or mode). To achieve this, we use the <code>datagrid</code> function. By default, this function produces a grid of data with regressors at their means or modes, so all we need to do to get the APM is:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span>, newdata <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span>
<span class="co">#&gt;   rowid     type  predicted  std.error    conf.low conf.high       hp      am</span>
<span class="co">#&gt; 1     1 response 0.06308965 0.08662801 0.003794253  0.543491 146.6875 0.40625</span></code></pre></div>
<p>This is equivalent to calling:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span>, newdata <span class="op">=</span> <span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   rowid     type  predicted  std.error    conf.low conf.high       hp      am</span>
<span class="co">#&gt; 1     1 response 0.06308965 0.08662801 0.003794253  0.543491 146.6875 0.40625</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="average-adjusted-predictions-aap">Average Adjusted Predictions (AAP)<a class="anchor" aria-label="anchor" href="#average-adjusted-predictions-aap"></a>
</h2>
<p>An “Average Adjusted Prediction” is the outcome of a two step process:</p>
<ol style="list-style-type: decimal">
<li>Create a new dataset with each of the original regressor values, but fixing some regressors to values of interest.</li>
<li>Take the average of the predicted values in this new dataset.</li>
</ol>
<p>We can obtain AAPs by applying the <code><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy()</a></code> or <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> functions to an object produced by the <code><a href="../reference/predictions.html">predictions()</a></code> function:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pred</span><span class="op">)</span>
<span class="co">#&gt; Average Adjusted Predictions </span>
<span class="co">#&gt;   Predicted Std. Error z value   Pr(&gt;|z|) CI low CI high</span>
<span class="co">#&gt; 1    0.4375    0.04288    10.2 &lt; 2.22e-16 0.3535  0.5215</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model type:  glm </span>
<span class="co">#&gt; Prediction type:  response</span></code></pre></div>
<p>This is equivalent to:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pred</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>AAP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">predicted</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;      AAP</span>
<span class="co">#&gt; 1 0.4375</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">pred</span><span class="op">)</span>
<span class="co">#&gt; Average Adjusted Predictions </span>
<span class="co">#&gt;   Predicted Std. Error z value   Pr(&gt;|z|) CI low CI high</span>
<span class="co">#&gt; 1    0.4375    0.04288    10.2 &lt; 2.22e-16 0.3535  0.5215</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model type:  glm </span>
<span class="co">#&gt; Prediction type:  response</span></code></pre></div>
<p>We can also compute the AAP for multiple values of the regressors. For example, here use create a “counterfactual” data grid where each observation of the dataset are repeated twice, with different values of the <code>am</code> variable, and all other variables held at the observed values. Then, we use the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function’s <code>by</code> argument or some <code>dplyr</code> magic:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span>
    <span class="va">mod</span>,
    newdata <span class="op">=</span> <span class="fu"><a href="../reference/datagrid.html">datagrid</a></span><span class="op">(</span>am <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1</span>, grid_type <span class="op">=</span> <span class="st">"counterfactual"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">p</span>, by <span class="op">=</span> <span class="st">"am"</span><span class="op">)</span>
<span class="co">#&gt; Average Adjusted Predictions </span>
<span class="co">#&gt;   am Predicted Std. Error z value   Pr(&gt;|z|) CI low CI high</span>
<span class="co">#&gt; 1  0    0.5261    0.03303   15.93 &lt; 2.22e-16 0.4614  0.5909</span>
<span class="co">#&gt; 2  1    0.3302    0.06462    5.11 3.2272e-07 0.2035  0.4568</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Model type:  glm </span>
<span class="co">#&gt; Prediction type:  response</span>

<span class="va">p</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">am</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>AAP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">predicted</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="co">#&gt;      am   AAP</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     0 0.526</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 0.330</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conditional-adjusted-predictions-plot">Conditional Adjusted Predictions (Plot)<a class="anchor" aria-label="anchor" href="#conditional-adjusted-predictions-plot"></a>
</h2>
<p>First, we download the <code>ggplot2movies</code> dataset from the <a href="https://vincentarelbundock.github.io/Rdatasets/articles/data.html" class="external-link">RDatasets archive</a>. Then, we create a variable called <code>certified_fresh</code> for movies with a rating of at least 8. Finally, we discard some outliers and fit a logistic regression model:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>
<span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"https://vincentarelbundock.github.io/Rdatasets/csv/ggplot2movies/movies.csv"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>style <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">Action</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Action"</span>,
                             <span class="va">Comedy</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Comedy"</span>,
                             <span class="va">Drama</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Drama"</span>,
                             <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Other"</span><span class="op">)</span>,
           style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">style</span><span class="op">)</span>,
           certified_fresh <span class="op">=</span> <span class="va">rating</span> <span class="op">&gt;=</span> <span class="fl">8</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">length</span> <span class="op">&lt;</span> <span class="fl">240</span><span class="op">)</span>

<span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">certified_fresh</span> <span class="op">~</span> <span class="va">length</span> <span class="op">*</span> <span class="va">style</span>, data <span class="op">=</span> <span class="va">dat</span>, family <span class="op">=</span> <span class="va">binomial</span><span class="op">)</span></code></pre></div>
<p>We can plot adjusted predictions, conditional on the <code>length</code> variable using the <code>plot_cap</code> function:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">certified_fresh</span> <span class="op">~</span> <span class="va">length</span>, data <span class="op">=</span> <span class="va">dat</span>, family <span class="op">=</span> <span class="va">binomial</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot_cap.html">plot_cap</a></span><span class="op">(</span><span class="va">mod</span>, condition <span class="op">=</span> <span class="st">"length"</span><span class="op">)</span></code></pre></div>
<p><img src="mfx01_predictions_files/figure-html/unnamed-chunk-15-1.png" width="576"></p>
<p>We can also introduce another condition which will display a categorical variable like <code>style</code> in different colors. This can be useful in models with interactions:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">certified_fresh</span> <span class="op">~</span> <span class="va">length</span> <span class="op">*</span> <span class="va">style</span>, data <span class="op">=</span> <span class="va">dat</span>, family <span class="op">=</span> <span class="va">binomial</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot_cap.html">plot_cap</a></span><span class="op">(</span><span class="va">mod</span>, condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"length"</span>, <span class="st">"style"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="mfx01_predictions_files/figure-html/unnamed-chunk-16-1.png" width="576"></p>
<p>Since the output of <code><a href="../reference/plot_cap.html">plot_cap()</a></code> is a <code>ggplot2</code> object, it is very easy to customize. For example, we can add points for the actual observations of our dataset like so:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/slowkow/ggrepel" class="external-link">ggrepel</a></span><span class="op">)</span>

<span class="va">mt</span> <span class="op">&lt;-</span> <span class="va">mtcars</span>
<span class="va">mt</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/row.names.html" class="external-link">row.names</a></span><span class="op">(</span><span class="va">mt</span><span class="op">)</span>

<span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">hp</span>, data <span class="op">=</span> <span class="va">mt</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot_cap.html">plot_cap</a></span><span class="op">(</span><span class="va">mod</span>, condition <span class="op">=</span> <span class="st">"hp"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">hp</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">mt</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_rug.html" class="external-link">geom_rug</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">hp</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">mt</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html" class="external-link">geom_text_repel</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">hp</span>, y <span class="op">=</span> <span class="va">mpg</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span>,
                    data <span class="op">=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/subset.data.table.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">mt</span>, <span class="va">hp</span> <span class="op">&gt;</span> <span class="fl">250</span><span class="op">)</span>,
                    nudge_y <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="mfx01_predictions_files/figure-html/unnamed-chunk-17-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="prediction-types">Prediction types<a class="anchor" aria-label="anchor" href="#prediction-types"></a>
</h2>
<p>The <code>predictions</code> function computes model-adjusted means on the scale of the output of the <code>predict(model)</code> function. By default, <code>predict</code> produces predictions on the <code>"response"</code> scale, so the adjusted predictions should be interpreted on that scale. However, users can pass a string to the <code>type</code> argument, and <code>predictions</code> will consider different outcomes.</p>
<p>Typical values include <code>"response"</code> and <code>"link"</code>, but users should refer to the documentation of the <code>predict</code> of the package they used to fit the model to know what values are allowable. documentation.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">am</span> <span class="op">~</span> <span class="va">mpg</span>, family <span class="op">=</span> <span class="va">binomial</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pred</span><span class="op">)</span>
<span class="co">#&gt;   rowid     type predicted  std.error  conf.low conf.high am  mpg</span>
<span class="co">#&gt; 1     1 response 0.4610951 0.11584004 0.2554723 0.6808686  1 21.0</span>
<span class="co">#&gt; 2     2 response 0.4610951 0.11584004 0.2554723 0.6808686  1 21.0</span>
<span class="co">#&gt; 3     3 response 0.5978984 0.13239819 0.3356711 0.8139794  1 22.8</span>
<span class="co">#&gt; 4     4 response 0.4917199 0.11961263 0.2746560 0.7119512  0 21.4</span>
<span class="co">#&gt; 5     5 response 0.2969009 0.10051954 0.1411369 0.5204086  0 18.7</span>
<span class="co">#&gt; 6     6 response 0.2599331 0.09782666 0.1147580 0.4876032  0 18.1</span>

<span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predictions.html">predictions</a></span><span class="op">(</span><span class="va">mod</span>, type <span class="op">=</span> <span class="st">"link"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pred</span><span class="op">)</span>
<span class="co">#&gt;   rowid type   predicted std.error   statistic    p.value   conf.low</span>
<span class="co">#&gt; 1     1 link -0.15593472 0.4661826 -0.33449281 0.73800772 -1.0696358</span>
<span class="co">#&gt; 2     2 link -0.15593472 0.4661826 -0.33449281 0.73800772 -1.0696358</span>
<span class="co">#&gt; 3     3 link  0.39671602 0.5507048  0.72037875 0.47129183 -0.6826455</span>
<span class="co">#&gt; 4     4 link -0.03312345 0.4785818 -0.06921168 0.94482113 -0.9711265</span>
<span class="co">#&gt; 5     5 link -0.86209956 0.4815290 -1.79033775 0.07339963 -1.8058791</span>
<span class="co">#&gt; 6     6 link -1.04631647 0.5085395 -2.05749308 0.03963882 -2.0430356</span>
<span class="co">#&gt;     conf.high am  mpg</span>
<span class="co">#&gt; 1  0.75776637  1 21.0</span>
<span class="co">#&gt; 2  0.75776637  1 21.0</span>
<span class="co">#&gt; 3  1.47607755  1 22.8</span>
<span class="co">#&gt; 4  0.90487956  0 21.4</span>
<span class="co">#&gt; 5  0.08167995  0 18.7</span>
<span class="co">#&gt; 6 -0.04959739  0 18.1</span></code></pre></div>
<p>We can also plot predictions on different outcome scales:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_cap.html">plot_cap</a></span><span class="op">(</span><span class="va">mod</span>, condition <span class="op">=</span> <span class="st">"mpg"</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></code></pre></div>
<p><img src="mfx01_predictions_files/figure-html/unnamed-chunk-19-1.png" width="576"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_cap.html">plot_cap</a></span><span class="op">(</span><span class="va">mod</span>, condition <span class="op">=</span> <span class="st">"mpg"</span>, type <span class="op">=</span> <span class="st">"link"</span><span class="op">)</span></code></pre></div>
<p><img src="mfx01_predictions_files/figure-html/unnamed-chunk-20-1.png" width="576"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Vincent Arel-Bundock.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
